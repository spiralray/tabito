
<!DOCTYPE HTML>
<html lang="ja">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="format-detection" content="telephone=no">
<title>jQuery UI Sortable</title>
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
<link rel="stylesheet" href="assets/css/jquery-ui.css">
<link rel="stylesheet" href="assets/css/style.css">
<script type="text/javascript" src="assets/js/jquery.min.js"></script>
<script type="text/javascript" src="assets/js/jquery-ui.min.js"></script>
<script type="text/javascript" src="assets/js/jquery.ui.touch-punch.js"></script>



<script>
<!--
$(function() {
	$('.jquery-ui-sortable').sortable({
		items: '> li:not(.unsortable)',
		connectWith: '.jquery-ui-sortable',
		placeholder: "",
		cursor: 'move',
		opacity: 0.5,
		revert: true,

		start: function (e, ui) { //startの意味は、sortableの開始をトリガーとして、動くstart(event,ui)で書かれて、uiというオブジェクトの中にいろいろとさらなるオブジェクトが格納されている。
			placeholderHeight = ui.item.outerHeight(); //掴んだ要素の高さを取得マージンをはいらない。.itemは今ドラッグしているもの
			//console.log(ui.placeholder);//この時点では、ui.placeholder.heightの値は0
			ui.placeholder.height(placeholderHeight + 15); //ui.placeholder.heightに、Plaiceholderの高さとして:afterを含めた高さを格納。
			$('<div class="slide-placeholder-animator" data-height="' + placeholderHeight + '"></div>').insertAfter(ui.placeholder); //ui.placeholderにオブジェクトを格納。
			//console.log(ui.placeholder)
	
		}, //次の関数に移れば、ui.placeholderの値はリセットされる(0になる。)のでは無いの？そうだと思う。
		change: function (event, ui) { //*DOMが書き換わった後*の動いている途中の状態。
			ui.placeholder.stop().height(0).animate({
				height: ui.item.outerHeight() + 15
			}, 300); //ui.placeholderの動きをストップして、ui.placeholderの高さを0にして、高さPlaceholder＋15までアニメートさせる？Placeholder(グレーの部分)の要素の高さ自体を広げる。
	
			placeholderAnimatorHeight = parseInt($(".slide-placeholder-animator").attr("data-height")); //.slide-placeholderのdata-height属性の数字を撮ってきている。parseInt()は文字列を整数に変換するグローバル関数。9行目のやつを取ってきてる。
	
			$(".slide-placeholder-animator").stop().height(placeholderAnimatorHeight + 15).animate({
				height: 0
			}, 300, function () { //このアニメーションは残りのSlide達の位置の処理ではないか？
				$(this).remove();
				placeholderHeight = ui.item.outerHeight() //また宣同じ内容を言している。。。なぜだ？
				$('<div class="slide-placeholder-animator" data-height="' + placeholderHeight + '"></div>').insertAfter(ui.placeholder);
			}); //ここでも同じ内容を宣言している。。

	},
	stop: function (e, ui) {

		$(".slide-placeholder-animator").remove(); //.slide-placeholder-animatorここで察するに、少なくともRemoveする必要があるということ。

	},

	});
});
// -->
</script>
</head>

<body>

<div class="place">

<div class="btn">
  <input type="checkbox" id="navTgl">
  <label for="navTgl" class="open">≡</label>
  <label for="navTgl" class="close"></label>
</div>
  
<div class="selected">

<ul class="jquery-ui-sortable">

	<li class="place place-selected">
		<img src="img/01.jpg" width="100" height="100">
		金閣寺<br>
	</li>
	
	<li class="route unsortable">経路</li>
	
	<li class="place place-selected">
		<img src="img/02.jpg" width="100" height="100">
		嵐山<br>
	</li>
	
	<li class="route unsortable">経路</li>
	
	<li class="place place-selected">
		<img src="img/03.jpg" width="100" height="100">
		伏見稲荷大社<br>
	</li>
</ul>

</div>


<div class="unselected">


<ul class="jquery-ui-sortable">

	<li class="place place-unselected">
		<img src="img/04.jpg" width="100" height="100">
		鈴虫寺<br>
	</li>
	
	<li class="place place-unselected">
		<img src="img/05.jpg" width="100" height="100">
		平安神宮<br>
	</li>
	
</ul>

</div>
</div>


<script type="text/javascript">
<!--
var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-27007852-1']);
_gaq.push(['_trackPageview']);
(function() {
	var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
	ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
	var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();
// -->
</script>

</body>
</html>
<div class="wrap">
